<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Gallery</title>
    <link rel="stylesheet" href="gallery.css">
</head>
<body>

    <audio id="backgroundMusic" src="17 CorazÃ³n de melon.mp3" autoplay></audio>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const audio = document.getElementById("backgroundMusic");
            const savedTime = sessionStorage.getItem("audioTime");
            const wasPlaying = sessionStorage.getItem("isPlaying") === "true"; // Convert to boolean

            if (savedTime !== null) {
                audio.currentTime = parseFloat(savedTime); // Restore time
            }

            if (wasPlaying) {
                audio.play(); // Resume playing if it was playing before
            }

            document.getElementById("backBtn").addEventListener("click", function() {
                sessionStorage.setItem("audioTime", audio.currentTime);
                sessionStorage.setItem("isPlaying", !audio.paused);
                sessionStorage.setItem("skipEnvelope", "true");

                window.location.href = "index.html"; // Return to main page
             });
        });
    </script>

    <div class="gallery-container">
        <h1>Our Memories ðŸ“¸</h1>
        <div class="gallery-grid">
            <img src="toGallery1.JPG" alt="Photo 1">
            <img src="toGallery2.JPG" alt="Photo 2">
            <img src="toGallery3.JPG" alt="Photo 3">
            <img src="toGallery4.JPG" alt="Photo 4">
            <img src="toGallery5.JPG" alt="Photo 5">
            <img src="toGallery6.JPG" alt="Photo 6">
            <img src="toGallery7.JPG" alt="Photo 7">
            <img src="toGallery8.JPG" alt="Photo 8">
            <img src="toGallery9.JPG" alt="Photo 9">
            <img src="toGallery10.JPG" alt="Photo 10">
            <img src="toGallery11.JPG" alt="Photo 11">
            <img src="toGallery12.JPG" alt="Photo 12">
            <img src="toGallery13.JPG" alt="Photo 13">
            <img src="toGallery14.JPG" alt="Photo 14">
            <img src="toGallery15.JPG" alt="Photo 15">
            <img src="toGallery16.JPG" alt="Photo 16">
            <img src="toGallery17.JPG" alt="Photo 17">
            <img src="toGallery18.JPG" alt="Photo 18">
            <img src="toGallery19.JPG" alt="Photo 19">
            <img src="toGallery20.JPG" alt="Photo 20">
            <img src="toGallery21.JPG" alt="Photo 21">
            <img src="toGallery22.JPG" alt="Photo 22">
        </div>
        <h1>The most beautiful girl I ever did see.</h1>
        <div class="buttons">
            <button id="backBtn" class="gallery-button">Back</button>
        </div>
    </div>

    <script>
        document.getElementById("backBtn").addEventListener("click", function() {
            const audio = document.getElementById("backgroundMusic");

            // Save audio position and playback state
            sessionStorage.setItem("audioTime", audio.currentTime);
            sessionStorage.setItem("isPlaying", !audio.paused); // True if playing
            sessionStorage.setItem("skipEnvelope", "true"); // Prevents envelope screen

            window.location.href = "index.html"; // Go back to main page
        });
    </script>

    <div id="lightbox" class="hidden">
        <img id="lightbox-img" src="" alt="Zoomed Photo">
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const galleryPhotos = document.querySelectorAll(".gallery-grid img");
            const lightbox = document.getElementById("lightbox");
            const lightboxImg = document.getElementById("lightbox-img");
    
            // Click on a photo to zoom in
            galleryPhotos.forEach(photo => {
                photo.addEventListener("click", function() {
                    lightboxImg.src = this.src; // Set the clicked image in the lightbox
                    lightbox.classList.add("show-lightbox"); // Show the lightbox
                });
            });
    
            // Click outside the image to close the lightbox
            lightbox.addEventListener("click", function(event) {
                if (event.target !== lightboxImg) {
                    lightbox.classList.remove("show-lightbox");
                }
            });
    
            // Close lightbox with ESC key
            document.addEventListener("keydown", function(event) {
                if (event.key === "Escape") {
                    lightbox.classList.remove("show-lightbox");
                }
            });
        });
    </script>
    
</body>
</html>
